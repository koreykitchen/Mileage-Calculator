(this["webpackJsonpmileage-calculator"]=this["webpackJsonpmileage-calculator"]||[]).push([[0],{11:function(e,t){},13:function(e,t,a){e.exports=a(26)},18:function(e,t,a){},24:function(e,t){},25:function(e,t){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),o=a.n(s),i=(a(18),a(1)),l=a(2),u=a(3),c=a(4),d=a(8),y=a.n(d),p=a(5),f=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({loaded:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("p",null,"Select a store to add to your ",r.a.createElement("span",{style:{fontWeight:"bold"}},this.props.currentDay)," route: "),r.a.createElement("select",{id:"locationSelectElement",style:{width:"75vw"}},this.populateSelectElement()),r.a.createElement("button",{onClick:function(){return e.props.addLocationFunctions[e.props.currentDayIndex][e.getSelectedIndex()]()},style:{marginLeft:"25px"}},"Add Store"))}},{key:"populateSelectElement",value:function(){return this.props.storeListData.map((function(e,t){return e.Name?r.a.createElement("option",{key:t,value:t},e.Name+" - "+e.Address+" - "+e.City):[]}))}},{key:"getSelectedIndex",value:function(){var e=document.getElementById("locationSelectElement");return e?e.options[e.selectedIndex].value:0}}]),a}(r.a.Component),h=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bordered-div"},this.props.storeData.Name+" - "+this.props.storeData.Address+" - "+this.props.storeData.City,r.a.createElement("button",{onClick:function(){return e.props.removeStore()},style:{color:"red",float:"right"}},"Remove"))}}]),a}(r.a.Component),m=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"bordered-div"},r.a.createElement("p",null,this.props.currentDaysData.length," store(s) added to the day..."),this.populateLocationsHtml(Object(p.a)(this.props.currentDaysData)))}},{key:"populateLocationsHtml",value:function(e){var t=this;return 0===e.length?void 0:Array(e.length).fill(null).map((function(a,n){return r.a.createElement(h,{key:n,storeData:e[n],removeStore:function(){return t.props.removeLocationFunctions[t.props.currentDayIndex][n]()}})}))}}]),a}(r.a.Component),D=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={currentDay:"Sunday"},n.arrayOfDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bordered-div"},this.setupWeekdayTabs(),r.a.createElement("button",{onClick:function(){return e.props.swapWeekOrDistanceDisplay()},style:{marginLeft:"25px"}},"Total Mileage"),r.a.createElement(f,{currentDay:this.state.currentDay,currentDayIndex:this.arrayOfDayNames.findIndex((function(t){return t===e.state.currentDay})),storeListData:this.props.storeListData,addLocationFunctions:this.props.addLocationFunctions}),r.a.createElement(m,{currentDayIndex:this.arrayOfDayNames.findIndex((function(t){return t===e.state.currentDay})),currentDaysData:this.getDaysData(this.state.currentDay),removeLocationFunctions:this.props.removeLocationFunctions}))}},{key:"getDaysData",value:function(e){var t=this.arrayOfDayNames.findIndex((function(t){return t===e}));return this.props.arrayOfDaysData[t]}},{key:"setupWeekdayTabs",value:function(){var e=this;return this.arrayOfDayNames.map((function(t,a){return r.a.createElement("button",{key:t,onClick:function(){return e.setCurrentDay(a)},style:{margin:"1px"}},t)}))}},{key:"setCurrentDay",value:function(e){this.setState({currentDay:this.arrayOfDayNames[e]})}}]),a}(r.a.Component),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={content:"LOADING...",loaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dayResults&&!this.state.loaded?this.storeResults(this.props.dayResults):this.requestMileageCalculation()}},{key:"componentDidUpdate",value:function(){this.props.dayResults&&!this.state.loaded&&this.storeResults(this.props.dayResults)}},{key:"render",value:function(){return r.a.createElement("div",{className:"bordered-div"},r.a.createElement("p",{style:{fontWeight:"bold"}},this.getDayNameFromIndex(this.props.dayIndex)+": "),this.state.content)}},{key:"requestMileageCalculation",value:function(){this.props.dayData.length>=2&&this.props.dayData.length<=20?(new window.google.maps.DirectionsService).route(this.buildUpMileageRequestForDay(),this.props.callbackToStoreResults):this.setState({content:this.getDayNameFromIndex(this.props.dayIndex)+"'s number of stores must be between 2 and 20...",loaded:!0})}},{key:"buildUpMileageRequestForDay",value:function(){return{origin:this.props.dayData[0].Address+","+this.props.dayData[0].City,destination:this.props.dayData[1].Address+","+this.props.dayData[1].City,travelMode:"DRIVING"}}},{key:"storeResults",value:function(e){this.setState({content:"Distance between "+this.getDayNameFromIndex(this.props.dayIndex)+"'s first two stops: "+this.convertMetersToMiles(e.routes[0].legs[0].distance.value)+" miles...",loaded:!0})}},{key:"convertMetersToMiles",value:function(e){return Math.round(621371e-9*e*10)/10}},{key:"getDayNameFromIndex",value:function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}}]),a}(r.a.Component),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loaded:!1,arrayOfResults:new Array(7).fill(null),callbacksToStoreResults:n.generateCallbacksToStoreResults()},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(document.getElementById("googleMapsScriptElement"))this.setState({loaded:!0});else{var e=document.createElement("script");e.id="googleMapsScriptElement",e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASFAgyRK86Z88JTF_LlbtUsLTmw0_eNdI",e.onload=this.callbackToSetAsLoaded,document.body.appendChild(e)}}},{key:"callbackToSetAsLoaded",value:function(){window.distanceElement.setState({loaded:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bordered-div"},r.a.createElement("button",{onClick:function(){return e.props.swapWeekOrDistanceDisplay()}},"Go Back"),this.displayLoadingOrDayDistanceElements())}},{key:"displayLoadingOrDayDistanceElements",value:function(){var e=this;return this.state.loaded?new Array(7).fill(null).map((function(t,a){return r.a.createElement(v,{key:a,dayIndex:a,dayData:e.props.arrayOfDaysData[a],dayResults:e.state.arrayOfResults[a],callbackToStoreResults:e.state.callbacksToStoreResults[a]})})):r.a.createElement("p",null,"LOADING...")}},{key:"generateCallbacksToStoreResults",value:function(){var e=this;return new Array(7).fill(null).map((function(t,a){return function(t,n){return e.storeCalculatedDistance(t,n,a)}}))}},{key:"storeCalculatedDistance",value:function(e,t,a){"OK"===t&&window.distanceElement.storeResults(e,a)}},{key:"storeResults",value:function(e,t){var a=Object(p.a)(this.state.arrayOfResults);a[t]=e,this.setState({arrayOfResults:a})}}]),a}(r.a.Component),k=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={weekDisplayed:!0,arrayOfDaysData:new Array(7).fill([])},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Mileage Calculator"),r.a.createElement("p",null,"A Note Before Using:"),r.a.createElement("p",null,"Mileage calculator is still in development, and therefore may be prone to bugs and crashes..."),r.a.createElement("p",null,"Some functionality may be missing or incomplete..."),this.renderWeekOrDistance())}},{key:"renderWeekOrDistance",value:function(){var e=this;return this.state.weekDisplayed?r.a.createElement(D,{storeListData:this.props.storeListData,arrayOfDaysData:this.state.arrayOfDaysData,swapWeekOrDistanceDisplay:function(){return e.swapWeekOrDistanceDisplay()},addLocationFunctions:this.generateAddLocationFunctions(),removeLocationFunctions:this.generateRemoveLocationFunctions()}):r.a.createElement(b,{swapWeekOrDistanceDisplay:function(){return e.swapWeekOrDistanceDisplay()},arrayOfDaysData:this.state.arrayOfDaysData,ref:function(e){return window.distanceElement=e}})}},{key:"swapWeekOrDistanceDisplay",value:function(){this.setState({weekDisplayed:!this.state.weekDisplayed})}},{key:"addStore",value:function(e,t){var a=Object(p.a)(this.state.arrayOfDaysData),n=Object(p.a)(a[e]);n.push(t),a[e]=n,this.setState({arrayOfDaysData:a})}},{key:"removeStore",value:function(e,t){var a=Object(p.a)(this.state.arrayOfDaysData),n=Object(p.a)(a[e]);n.splice(t,1),a[e]=n,this.setState({arrayOfDaysData:a})}},{key:"generateAddLocationFunctions",value:function(){var e=this;return new Array(7).fill(null).map((function(t,a){return new Array(e.props.storeListData.length).fill(null).map((function(t,n){return function(){return e.addStore(a,e.props.storeListData[n])}}))}))}},{key:"generateRemoveLocationFunctions",value:function(){var e=this;return new Array(7).fill(null).map((function(t,a){return new Array(e.state.arrayOfDaysData[a].length).fill(null).map((function(t,n){return function(){return e.removeStore(a,n)}}))}))}}]),a}(r.a.Component),O=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={storeListData:[],dataHasBeenLoaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getStoreListData(this.callbackFunctionToStoreData,this)}},{key:"render",value:function(){return this.state.dataHasBeenLoaded?r.a.createElement(k,{storeListData:this.state.storeListData}):r.a.createElement("h1",{style:{textAlign:"center",padding:"100px"}},"LOADING...")}},{key:"getStoreListData",value:function(e,t){var a=new XMLHttpRequest;a.open("GET","https://koreykitchen.github.io/Mileage-Calculator/StoreList.xlsx",!0),a.responseType="arraybuffer",a.onload=function(){e(a.response,t)},a.send()}},{key:"callbackFunctionToStoreData",value:function(e,t){var a=new Uint8Array(e),n=y.a.read(a,{type:"array"}),r=n.Sheets[n.SheetNames[0]],s=y.a.utils.sheet_to_json(r,{blankrows:!1});s=(s=s.filter((function(e){return e.Name}))).sort((function(e,t){var a=e.Name.toUpperCase(),n=t.Name.toUpperCase(),r=0;return a>n?r=1:a<n&&(r=-1),r})),t.setState({storeListData:s,dataHasBeenLoaded:!0})}}]),a}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.e7869bfd.chunk.js.map